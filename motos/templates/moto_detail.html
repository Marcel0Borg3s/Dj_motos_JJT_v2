{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="carousel-container">
  <div class="carousel-slide">
    {% if object.photo %}<img src="{{ object.photo.url }}" alt="Foto 1">{% endif %}
    {% if object.photo2 %}<img src="{{ object.photo2.url }}" alt="Foto 2">{% endif %}
    {% if object.photo3 %}<img src="{{ object.photo3.url }}" alt="Foto 3">{% endif %}
    {% if object.photo4 %}<img src="{{ object.photo4.url }}" alt="Foto 4">{% endif %}
    {% if object.photo5 %}<img src="{{ object.photo5.url }}" alt="Foto 5">{% endif %}
    {% if object.photo6 %}<img src="{{ object.photo6.url }}" alt="Foto 6">{% endif %}
  </div>

  <button class="carousel-btn prev">&#10094;</button>
  <button class="carousel-btn next">&#10095;</button>

  <div class="carousel-dots"></div>
</div>



    
    <div class="card-header-custom">
      <h2 class="card-title-custom text-center-custom">{{ object.brand }} {{ object.model }}</h2>
    </div>
    
    <div class="card-body-custom">
      <div class="row">
        <div class="col-md-6">
          <p class="card-text-custom">
            <span class="text-highlight-custom">Ano de fabricação:</span><br>
            {{ object.factor_year }}
          </p>
        </div>
        <div class="col-md-6">
          <p class="card-text-custom">
            <span class="text-highlight-custom">Ano do modelo:</span><br>
            {{ object.model_year }}
          </p>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-6">
          <p class="card-text-custom">
            <span class="text-highlight-custom">Placa:</span><br>
            {{ object.plate }}
          </p>
        </p>

        {% if object.bio %}
          <p class="card-text-custom">
            <span class="text-highlight-custom">Detalhes: </span><br>
            <strong style="font-size: 1.2em; color: #f4f4f4;"> {{ object.bio }}</strong>
          </p>
        {% endif %}
      </div>
        
      <div class="col-md-6">
        <p class="card-text-custom">
          <span class="text-highlight-custom">Preço:</span><br>
          <strong style="font-size: 1.2em; color: #f4f4f4;">
            {% if object.value %}
              R$ {{ object.value }}
            {% else %}
            Consulte
            {% endif %}
          </strong>
        </p>
      </div>
      
    </div>
    {% if user.is_authenticated %}
      <div class="card-footer-custom text-center-custom">
        <a href="{% url 'moto_update' pk=object.pk %}" class="btn-custom btn-primary-custom">Editar Moto</a>
        <a href="{% url 'motos_list' %}" class="btn-custom btn-secondary-custom">Voltar à Lista</a>
        <a href="{% url 'moto_delete' pk=object.pk %}" class="btn-custom btn-danger-custom">Deletar</a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}



{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function() {
  const slide = document.querySelector(".carousel-slide");
  const images = slide.querySelectorAll("img");
  const prevBtn = document.querySelector(".carousel-btn.prev");
  const nextBtn = document.querySelector(".carousel-btn.next");
  const dotsContainer = document.querySelector(".carousel-dots");

  let currentIndex = 0;

  // Criar bolinhas
  images.forEach((_, index) => {
    const dot = document.createElement("button");
    dot.addEventListener("click", () => goToSlide(index));
    dotsContainer.appendChild(dot);
  });

  const dots = dotsContainer.querySelectorAll("button");

  function updateCarousel() {
    slide.style.transform = `translateX(${-currentIndex * 100}%)`;
    dots.forEach(dot => dot.classList.remove("active"));
    dots[currentIndex].classList.add("active");
  }

  function goToSlide(index) {
    currentIndex = index;
    updateCarousel();
  }

  nextBtn.addEventListener("click", () => {
    currentIndex = (currentIndex + 1) % images.length;
    updateCarousel();
  });

  prevBtn.addEventListener("click", () => {
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    updateCarousel();
  });

  // Inicializar
  updateCarousel();
});
</script>
{% endblock %}

